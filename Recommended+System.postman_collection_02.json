{
	"info": {
		"_postman_id": "186d6bb3-e294-4577-b7a3-c614e2826cbd",
		"name": "Recommended System",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "RS mapping",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"settings\": {\n        \"number_of_shards\": 1\n    },\n    \"mappings\": {\n        \"properties\": {\n            \"executor\": {\n                \"properties\": {\n                    \"id\": {\n                        \"type\": \"integer\"\n                    },\n                    \"name\": {\n                        \"type\": \"text\"\n                    },\n                    \"is_blocked\": {\n                        \"type\": \"boolean\"\n                    },\n                    \"rating\": {\n                        \"type\": \"float\"\n                    },\n                    \"positive_opinion_count_within_quarter\": {\n                        \"type\": \"integer\"\n                    },\n                    \"message_count_within_quarter\": {\n                        \"type\": \"integer\"\n                    },\n                     \"executed_orders_count\": {\n                        \"type\": \"integer\"\n                    },\n                    \"office_location\": {\n                        \"type\": \"geo_point\"\n                    },\n                    \"services\": {\n                        \"type\": \"text\"\n                    },\n                    \"category_transaction_count\": {\n                        \"type\": \"nested\",\n                        \"properties\": {\n                            \"category_slug\": {\n                                \"type\": \"text\"\n                            },\n                            \"order_count\": {\n                                \"type\": \"integer\"\n                            }\n                        }\n                    }\n                }\n            },\n            \"executed_order\": {\n                \"properties\": {\n                \t \"id\": {\n                        \"type\": \"integer\"\n                    },\n                \t\"order_type\": {\n                \t\t\"type\": \"integer\"\n                \t},\n                    \"category_slug\": {\n                        \"type\": \"text\"\n                    },\n                    \"date\": {\n                        \"type\": \"date\",\n                        \"format\": \"yyyy/MM/dd HH:mm:ss||yyyy/MM/dd||epoch_millis\"\n                    },\n                    \"price\": {\n                        \"type\": \"float\"\n                    },\n                    \"location\": {\n                        \"type\": \"geo_point\"\n                    }\n                }\n            },\n            \"executor_orders_join_field\": {\n                \"type\": \"join\",\n                \"relations\": {\n                    \"executor_parent\": \"order_child\"\n                }\n            }\n        }\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors"
					]
				}
			},
			"response": []
		},
		{
			"name": "Add 1st executor",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"executor\": {\n        \"id\": 1,\n        \"name\": \"Cleaning WS company\",\n        \"is_blocked\": false,\n        \"rating\": 4.85,\n        \"positive_opinion_count_within_quarter\": 7,\n        \"message_count_within_quarter\": 50,\n        \"executed_orders_count\": 130,\n        \"office_location\": {\n            \"lat\": \"52.21\",\n            \"lon\": \"21.01\"\n        },\n        \"services\": [\n            \"office cleaning\",\n            \"house cleaning\",\n            \"appartment cleaning\",\n            \"pool cleaning\",\n            \"cutting the grass\",\n            \"garden cleaning\"\n        ],\n        \"category_transaction_count\": [\n            {\n                \"category_slug\": \"office\",\n                \"order_count\": 5\n            },\n            {\n                \"category_slug\": \"house\",\n                \"order_count\": 10\n            },\n            {\n                \"category_slug\": \"appartment\",\n                \"order_count\": 1\n            }\n        ]\n    },\n    \"executor_orders_join_field\": {\n        \"name\": \"executor_parent\"\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_doc/1?refresh",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_doc",
						"1"
					],
					"query": [
						{
							"key": "refresh",
							"value": null
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Add order 1-1",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"executed_order\": {\n        \"id\": 1,\n        \"date\": \"2021/08/01\",\n        \"order_type\": 1,\n        \"category_slug\": \"office\",\n        \"price\": 200,\n        \"location\": {\n            \"lat\": \"52.21\",\n            \"lon\": \"21.01\"\n        }\n    },\n    \"executor_orders_join_field\": {\n        \"name\": \"order_child\",\n        \"parent\": \"1\"\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_doc/2?routing=1&refresh",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_doc",
						"2"
					],
					"query": [
						{
							"key": "routing",
							"value": "1"
						},
						{
							"key": "refresh",
							"value": null
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Add order 1-2",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"executed_order\": {\n        \"id\": 2,\n        \"date\": \"2021/08/03\",\n        \"order_type\": 2,\n        \"category_slug\": \"house\",\n        \"price\": 300,\n        \"location\": {\n            \"lat\": \"52.21\",\n            \"lon\": \"21.01\"\n        }\n    },\n    \"executor_orders_join_field\": {\n        \"name\": \"order_child\",\n        \"parent\": \"1\"\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_doc/3?routing=1&refresh",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_doc",
						"3"
					],
					"query": [
						{
							"key": "routing",
							"value": "1"
						},
						{
							"key": "refresh",
							"value": null
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Add 2d executor",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"executor\": {\n        \"id\": 1,\n        \"name\": \"Ted Stown cleaning\",\n        \"is_blocked\": false,\n        \"rating\": 4.65,\n        \"positive_opinion_count_within_quarter\": 5,\n        \"message_count_within_quarter\": 10,\n        \"executed_orders_count\": 10,\n        \"office_location\": {\n            \"lat\": \"52.13\",\n            \"lon\": \"21.00\"\n        },\n        \"services\": [\n            \"appartment cleaning\",\n            \"cutting the grass\"\n        ],\n        \"category_transaction_count\": [\n            {\n                \"category_slug\": \"appartment\",\n                \"order_count\": 20\n            }\n        ]\n    },\n    \"executor_orders_join_field\": {\n        \"name\": \"executor_parent\"\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_doc/4?refresh",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_doc",
						"4"
					],
					"query": [
						{
							"key": "refresh",
							"value": null
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Add order 2-1",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"executed_order\": {\n        \"id\": 1,\n        \"date\": \"2021/08/01\",\n        \"order_type\": 1,\n        \"category_slug\": \"appartment\",\n        \"price\": 100,\n        \"location\": {\n            \"lat\": \"52.13\",\n            \"lon\": \"21.00\"\n        }\n    },\n    \"executor_orders_join_field\": {\n        \"name\": \"order_child\",\n        \"parent\": \"4\"\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_doc/5?routing=4&refresh",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_doc",
						"5"
					],
					"query": [
						{
							"key": "routing",
							"value": "4"
						},
						{
							"key": "refresh",
							"value": null
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Add order 2-2",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"executed_order\": {\n        \"id\": 1,\n        \"date\": \"2021/08/21\",\n        \"order_type\": 1,\n        \"category_slug\": \"appartment\",\n        \"price\": 70,\n        \"location\": {\n            \"lat\": \"52.13\",\n            \"lon\": \"21.00\"\n        }\n    },\n    \"executor_orders_join_field\": {\n        \"name\": \"order_child\",\n        \"parent\": \"4\"\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_doc/6?routing=4&refresh",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_doc",
						"6"
					],
					"query": [
						{
							"key": "routing",
							"value": "4"
						},
						{
							"key": "refresh",
							"value": null
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "RS query 1",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"bool\": {\n                        \"must\": [\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"term\": {\n                                            \"executor.is_blocked\": false\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.rating\": {\n                                                \"gte\": 3.5\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.executed_orders_count\": {\n                                                \"gte\": 3\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.message_count_within_quarter\": {\n                                                \"gte\": 5\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.positive_opinion_count_within_quarter\": {\n                                                \"gte\": 5\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"function_score\": {\n                        \"query\": {\n                            \"bool\": {\n                                \"must\": [\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"term\": {\n                                                    \"executor.is_blocked\": false\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.rating\": {\n                                                        \"gte\": 3.5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.executed_orders_count\": {\n                                                        \"gte\": 3\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.message_count_within_quarter\": {\n                                                        \"gte\": 5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.positive_opinion_count_within_quarter\": {\n                                                        \"gte\": 5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                ]\n                            }\n                        },\n                        \"functions\": [\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"house\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 1,\n                                                                \"lte\": 2\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 20,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"house\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 3,\n                                                                \"lte\": 10\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 30,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"house\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 11\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 5,\n                                \"filter\": {\n                                    \"geo_distance\": {\n                                        \"distance\": \"30km\",\n                                        \"executor.office_location\": {\n                                            \"lat\": 52.23,\n                                            \"lon\": 21.01\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"terms\": {\n                                        \"executor.services\": [\n                                            \"house cleaning\"\n                                        ]\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"terms\": {\n                                        \"executor.services\": [\n                                            \"cutting the grass\"\n                                        ]\n                                    }\n                                }\n                            }\n                        ],\n                        \"score_mode\": \"sum\"\n                    }\n                }\n            ],\n            \"should\": [\n                {\n                    \"has_child\": {\n                        \"type\": \"order_child\",\n                        \"query\": {\n                            \"function_score\": {\n                                \"query\": {\n                                    \"bool\": {\n                                        \"must\": [\n                                            {\n                                                \"range\": {\n                                                    \"executed_order.date\": {\n                                                        \"gte\": \"2019/08/21\"\n                                                    }\n                                                }\n                                            }\n                                        ]\n                                    }\n                                },\n                                \"functions\": [\n                                    {\n                                        \"weight\": 50,\n                                        \"filter\": {\n                                            \"geo_distance\": {\n                                                \"distance\": \"5km\",\n                                                \"executed_order.location\": {\n                                                    \"lat\": 52.23,\n                                                    \"lon\": 21.01\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"weight\": 10,\n                                        \"filter\": {\n                                            \"term\": {\n                                                \"executed_order.category_slug\": \"house\"\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"weight\": 10,\n                                        \"filter\": {\n                                            \"term\": {\n                                                \"executed_order.order_type\": 1\n                                            }\n                                        }\n                                    }\n                                ],\n                                \"score_mode\": \"sum\"\n                            }\n                        },\n                        \"score_mode\": \"max\"\n                    }\n                }\n            ]\n        }\n    },\n    \"from\": 0,\n    \"size\": 20\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_search",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_search"
					]
				}
			},
			"response": []
		},
		{
			"name": "RS query 2",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"bool\": {\n                        \"must\": [\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"term\": {\n                                            \"executor.is_blocked\": false\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.rating\": {\n                                                \"gte\": 3.5\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.executed_orders_count\": {\n                                                \"gte\": 3\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.message_count_within_quarter\": {\n                                                \"gte\": 5\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.positive_opinion_count_within_quarter\": {\n                                                \"gte\": 5\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"function_score\": {\n                        \"query\": {\n                            \"bool\": {\n                                \"must\": [\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"term\": {\n                                                    \"executor.is_blocked\": false\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.rating\": {\n                                                        \"gte\": 3.5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.executed_orders_count\": {\n                                                        \"gte\": 3\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.message_count_within_quarter\": {\n                                                        \"gte\": 5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.positive_opinion_count_within_quarter\": {\n                                                        \"gte\": 5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                ]\n                            }\n                        },\n                        \"functions\": [\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"appartment\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 1,\n                                                                \"lte\": 2\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 20,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"appartment\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 3,\n                                                                \"lte\": 10\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 30,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"appartment\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 11\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 5,\n                                \"filter\": {\n                                    \"geo_distance\": {\n                                        \"distance\": \"30km\",\n                                        \"executor.office_location\": {\n                                            \"lat\": 52.23,\n                                            \"lon\": 21.01\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"terms\": {\n                                        \"executor.services\": [\n                                            \"appartment cleaning\"\n                                        ]\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"terms\": {\n                                        \"executor.services\": [\n                                            \"cutting the grass\"\n                                        ]\n                                    }\n                                }\n                            }\n                        ],\n                        \"score_mode\": \"sum\"\n                    }\n                }\n            ],\n            \"should\": [\n                {\n                    \"has_child\": {\n                        \"type\": \"order_child\",\n                        \"query\": {\n                            \"function_score\": {\n                                \"query\": {\n                                    \"bool\": {\n                                        \"must\": [\n                                            {\n                                                \"range\": {\n                                                    \"executed_order.date\": {\n                                                        \"gte\": \"2019/08/21\"\n                                                    }\n                                                }\n                                            }\n                                        ]\n                                    }\n                                },\n                                \"functions\": [\n                                    {\n                                        \"weight\": 50,\n                                        \"filter\": {\n                                            \"geo_distance\": {\n                                                \"distance\": \"5km\",\n                                                \"executed_order.location\": {\n                                                    \"lat\": 52.23,\n                                                    \"lon\": 21.01\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"weight\": 10,\n                                        \"filter\": {\n                                            \"term\": {\n                                                \"executed_order.category_slug\": \"appartment\"\n                                            }\n                                        }\n                                    },\n                                     {\n                                        \"weight\": 10,\n                                        \"filter\": {\n                                            \"term\": {\n                                                \"executed_order.order_type\": 1\n                                            }\n                                        }\n                                    }\n                                ],\n                                \"score_mode\": \"sum\"\n                            }\n                        },\n                        \"score_mode\": \"max\"\n                    }\n                }\n            ]\n        }\n    },\n    \"from\": 0,\n    \"size\": 20\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_search",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_search"
					]
				}
			},
			"response": []
		},
		{
			"name": "RS query 2 Copy",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"bool\": {\n                        \"must\": [\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"term\": {\n                                            \"executor.is_blocked\": false\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.rating\": {\n                                                \"gte\": 3.5\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.executed_orders_count\": {\n                                                \"gte\": 3\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.message_count_within_quarter\": {\n                                                \"gte\": 5\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"constant_score\": {\n                                    \"filter\": {\n                                        \"range\": {\n                                            \"executor.positive_opinion_count_within_quarter\": {\n                                                \"gte\": 5\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"function_score\": {\n                        \"query\": {\n                            \"bool\": {\n                                \"must\": [\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"term\": {\n                                                    \"executor.is_blocked\": false\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.rating\": {\n                                                        \"gte\": 3.5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.executed_orders_count\": {\n                                                        \"gte\": 3\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.message_count_within_quarter\": {\n                                                        \"gte\": 5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"constant_score\": {\n                                            \"filter\": {\n                                                \"range\": {\n                                                    \"executor.positive_opinion_count_within_quarter\": {\n                                                        \"gte\": 5\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                ]\n                            }\n                        },\n                        \"functions\": [\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"appartment\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 1,\n                                                                \"lte\": 2\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 20,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"appartment\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 3,\n                                                                \"lte\": 10\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 30,\n                                \"filter\": {\n                                    \"nested\": {\n                                        \"path\": \"executor.category_transaction_count\",\n                                        \"query\": {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"executor.category_transaction_count.category_slug\": \"appartment\"\n                                                        }\n                                                    },\n                                                    {\n                                                        \"range\": {\n                                                            \"executor.category_transaction_count.order_count\": {\n                                                                \"gte\": 11\n                                                            }\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 5,\n                                \"filter\": {\n                                    \"geo_distance\": {\n                                        \"distance\": \"30km\",\n                                        \"executor.office_location\": {\n                                            \"lat\": 52.23,\n                                            \"lon\": 21.01\n                                        }\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"terms\": {\n                                        \"executor.services\": [\n                                            \"appartment cleaning\"\n                                        ]\n                                    }\n                                }\n                            },\n                            {\n                                \"weight\": 10,\n                                \"filter\": {\n                                    \"terms\": {\n                                        \"executor.services\": [\n                                            \"cutting the grass\"\n                                        ]\n                                    }\n                                }\n                            }\n                        ],\n                        \"score_mode\": \"sum\"\n                    }\n                }\n            ],\n            \"should\": [\n                {\n                    \"has_child\": {\n                        \"type\": \"order_child\",\n                        \"query\": {\n                            \"function_score\": {\n                                \"query\": {\n                                    \"bool\": {\n                                        \"must\": [\n                                            {\n                                                \"range\": {\n                                                    \"executed_order.date\": {\n                                                        \"gte\": \"2019/08/21\"\n                                                    }\n                                                }\n                                            }\n                                        ]\n                                    }\n                                },\n                                \"functions\": [\n                                    {\n                                        \"weight\": 50,\n                                        \"filter\": {\n                                            \"geo_distance\": {\n                                                \"distance\": \"5km\",\n                                                \"executed_order.location\": {\n                                                    \"lat\": 52.23,\n                                                    \"lon\": 21.01\n                                                }\n                                            }\n                                        }\n                                    },\n                                    {\n                                        \"weight\": 10,\n                                        \"filter\": {\n                                            \"term\": {\n                                                \"executed_order.category_slug\": \"appartment\"\n                                            }\n                                        }\n                                    },\n                                     {\n                                        \"weight\": 10,\n                                        \"filter\": {\n                                            \"term\": {\n                                                \"executed_order.order_type\": 1\n                                            }\n                                        }\n                                    }\n                                ],\n                                \"score_mode\": \"sum\"\n                            }\n                        },\n                        \"score_mode\": \"max\"\n                    }\n                }\n            ]\n        }\n    }\n}"
				},
				"url": {
					"raw": "http://localhost:9201/house_clean_executors/_explain/1/",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9201",
					"path": [
						"house_clean_executors",
						"_explain",
						"1",
						""
					]
				}
			},
			"response": []
		}
	]
}